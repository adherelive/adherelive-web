<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{{ translatedLabels.prescriptionTitle }}</title>
    <link rel="stylesheet" type="text/css" href="prescription.css">
</head>

<body>
<!-- TOP HEADING SECTION -->
<!-- Header Template -->
<div class="header">
    <div class="top_provider_section">
        <div class="top_provider_section_one">
            <picture>
                <!-- Primary source - hospital's actual logo -->
                <source srcset="{{ providerLogo }}">
                <!-- Fallback SVG logo -->
                <img
                        height="60"
                        width="60"
                        src="../../../other/medical-backup.svg"
                        alt="AdhereLive - Hospital Logo"
                />
            </picture>
        </div>
        <div class="top_provider_section_two">
            <h3>
                {{ providerName }} <br/>
                {{ providerAddress }} +91-8411042323 <br/>
            </h3>
            <p>{{translatedLabels.Patient}}: {{ patient_data.name }} - {{translatedLabels.ID}}: {{ patient_data.uid}}</p>
        </div>
        <div class="top_provider_section_three">
            <img
                    src="https://res.cloudinary.com/myrltech/image/upload/v1685082132/qr-code.jpg"
                    alt="adhere"
                    width="100"
                    height="100"
            />
        </div>
    </div>
</div>

<!-- SECTION TWO -->
<!-- Content sections with your existing HTML, but with page break controls -->
<!-- Main content starts -->
<div class="main-content">
    <div class="top_section_wrapper">
        <div class="top_section_wrapper_one">
            <h3>{{translatedLabels.Patient_Name}}:</h3>
            <p>{{ patient_data.name }}</p>
        </div>
        <div class="top_section_wrapper_two">
            <h3>{{translatedLabels.Registration}} {{translatedLabels.date}}/{{translatedLabels.time}}:</h3>
            <p>{{ patient_data.created_at }}</p>
        </div>
        <div class="top_section_wrapper_one">
            <h3>{{translatedLabels.Patient}} {{translatedLabels.Age}}/{{translatedLabels.Gender}}:</h3>
            <p>{{ patient_data.age }}/{{ patient_data.gender }}</p>
        </div>

        <div class="top_section_wrapper_two">
            <h3>{{translatedLabels.Patient}} {{translatedLabels.ID}}:</h3>
            <p>{{ patient_data.uid }}</p>
        </div>
        <div class="top_section_wrapper_one">
            <h3>{{translatedLabels.Patient_Mobile_No_}}:</h3>
            <p>+{{ patient_data.prefix }}-{{ patient_data.mobile_number }}</p>
        </div>
        <div class="top_section_wrapper_two">
            <h3>{{translatedLabels.Doctor_Name}}:</h3>
            <p>Dr. {{ doctorName }} {{ degree }}</p>
        </div>
        <div class="top_section_wrapper_one">
            <h3>{{translatedLabels.Patient}} {{translatedLabels.Address}}:</h3>
            <p>{{ patient_data.address }}</p>
        </div>
        <div class="top_section_wrapper_two">
            <!-- Removed the Doctor Email -->
            <!-- <h3>{{translatedLabels.Doctor_Email}}:</h3>
          <p>{{ doctorEmail }}</p> -->
        </div>
    </div>

    <!-- Chief Complaints:  -->
    <div class="chef-complaints-section">
        <!-- <div style="display: flex; align-items: center">
          <h3>{{translatedLabels.Relevant_History}}:</h3>
          <br />
        </div> -->
        <div style="display: flex; align-items: center">
            <h3>{{translatedLabels.Allergies}}:</h3>
            <p>{{ patient_data.allergies }}</p>
            <br/>
        </div>
        <div style="display: flex; align-items: center">
            <h3>{{translatedLabels.Comorbidities}}:</h3>
            <p>{{ patient_data.comorbidities }}</p>
            <br/>
        </div>
    </div>

    <!-- DIAGNOSIS  AND SYMPTOMS-->
    <div class="top_section_wrapper">
        <div
                class="top_section_wrapper_one"
                style="border-right: 1px solid; padding: 10px"
        >
            <h3>{{translatedLabels.Diagnosis}}:</h3>
            <p>{{ diagnosis }}</p>
        </div>
        <div class="top_section_wrapper_two" style="padding: 10px">
            <h3>{{translatedLabels.Symptoms}}:</h3>
            <p style="width: 250px">{{ symptoms_final_value }}</p>
        </div>
    </div>

    <!-- General | Systemic Examination: -->
    <div class="diagnosis_section">
        <div style="display: flex; align-items: center">
            <h3>{{translatedLabels.General}} | {{translatedLabels.Systematic_Examination}}:</h3>
            <p style="font-family: TiroDevanagariHindi-Regular, NotoSansDevanagari, Arial, sans-serif">
                {{ clinicalNotes }}
            </p>
        </div>
    </div>

    <!-- TREATMENT ADVISE -->
    <div class="treatment_advise_section">
        <h3>{{translatedLabels.Treatment_And_Follow_up_Advice}}:</h3>
        <p style="font-family: TiroDevanagariHindi-Regular, NotoSansDevanagari, Arial, sans-serif">
            <strong>{{ follow_up_advise }}</strong>
        </p>
    </div>

    <!-- COMPLAINTS SECTION -->
    <!-- Grid style not to be used until we get BMI, BP, Temperature, etc.
    <div class="complaints_section">
        <div class="complaints_subsection">
            <div>
                <table class="complaint_table">
                    <tr>
                        <th><h3>Height</h3></th>
                        <td><p>{{patient_data.height}} cm</p></td>
                    </tr>
                </table>
            </div>
            <div>
                <table class="complaint_table">
                    <tr>
                        <th><h3>Weight</h3></th>
                        <td><p>{{patient_data.weight}} kg</p></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    -->
    <!-- COMPLAINTS SECTION -->
    <div class="top_section_wrapper">
        <div class="top_section_wrapper_one" style="border-right: 1px solid; padding: 10px">
            <h3>{{translatedLabels.Height}}:</h3>
            <p>{{patient_data.height}} cm</p>
        </div>
        <div class="top_section_wrapper_two" style="padding: 10px">
            <h3>{{translatedLabels.Weight}}:</h3>
            <p>{{patient_data.weight}} kg</p>
        </div>
    </div>

    <!-- MEDICINE  SECTION -->
    <div class="medicine_section">
        <table class="medicine_table">
            <thead>
            <tr>
                <th>
                    <h3>S.No</h3>
                </th>
                <th style="width: 30%" colspan="2">
                    <h3>{{translatedLabels.Name_of_Medicine}}</h3>
                </th>
                <th>
                    <h3>{{translatedLabels.Dose}}</h3>
                </th>
                <th>
                    <h3>{{translatedLabels.Qty}}</h3>
                </th>
                <th colspan="3">
                    <div>
                        <h3>{{translatedLabels.Medicine_Schedule}}</h3>
                    </div>
                    <div class="schedule_medicine_wrapper">
                        <div>
                            <h4>{{translatedLabels.Morning}}</h4>
                        </div>
                        <div>
                            <h4>{{translatedLabels.Afternoon}}</h4>
                        </div>
                        <div>
                            <h4>{{translatedLabels.Night}}</h4>
                        </div>
                    </div>
                </th>
                <th>
                    <h3>{{translatedLabels.Start_Date}} / {{translatedLabels.Duration}}</h3>
                </th>
            </tr>
            </thead>
            <tbody>
            {{#each medicationsList}}
            <tr>
                <td>
                    <p>{{print @index }}</p>
                </td>
                <td colspan="2" style="padding: 0">
                    <div class="medicine_name_wrapper">
                        <div style="border-right: 1px solid; width: 80%;">
                            <p>{{ medicineType }}</p>
                        </div>
                        <div style="text-align: justify;">
                            <p>
                                <strong>{{ medicineName }}</strong><br/>
                                {{ genericName }} {{ strength }}<br/>
                                <span style="font-size: 10px;">{{translatedLabels.by}} {{translatedLabels.Dr_}} {{ organizer.name }}</span><br/>
                                {{translatedLabels.Note}}: - <span
                                    style="font-family: var(--font-family-base);">{{ description }}</span>
                            </p>
                        </div>
                    </div>
                </td>
                <td>
                    <p>{{ unit }}</p>
                </td>
                <td>
                    <p>{{ quantity }}</p>
                </td>
                <td>
                    <div class="right_tick_div">
                        <div class="tick_image">
                            {{#each timings_new.morning}}
                            <img
                                    src="https://res.cloudinary.com/myrltech/image/upload/v1685103497/download.png"
                                    alt="tick"
                                    width="15px"
                                    height="15px"
                            />
                            {{/each}}
                        </div>
                        {{#each timings_new.morning}}
                        <p style="font-size: 8px">{{ this }}</p>
                        {{/each}}
                    </div>
                </td>
                <td>
                    <div class="right_tick_div">
                        <div class="tick_image">
                            {{#each timings_new.afternoon}}
                            <img
                                    src="https://res.cloudinary.com/myrltech/image/upload/v1685103497/download.png"
                                    alt="tick"
                                    width="15px"
                                    height="15px"
                            />
                            {{/each}}
                        </div>
                        {{#each timings_new.afternoon}}
                        <p style="font-size: 8px">{{ this }}</p>
                        {{/each}}
                    </div>
                </td>
                <td>
                    <div class="right_tick_div">
                        <div class="tick_image">
                            {{#each timings_new.night}}
                            <img
                                    src="https://res.cloudinary.com/myrltech/image/upload/v1685103497/download.png"
                                    alt="tick"
                                    width="15px"
                                    height="15px"
                            />
                            {{/each}}
                        </div>
                        {{#each timings_new.night}}
                        <p style="font-size: 8px">{{ this }}</p>
                        {{/each}}
                    </div>
                </td>
                <td>
                    {{#if isSOS}}
                    <p>{{translatedLabels.Take_whenever_required}}</p>
                    {{else}}
                    <p>{{ startDate }} {{translatedLabels.From}} {{ duration }} {{translatedLabels.day_s_}}</p>
                    {{/if}}
                </td>
            </tr>
            {{/each}}
            </tbody>
        </table>
    </div>

    <!-- INVESTIGATION SECTION -->
    <!-- style="page-break-before: always" -->
    <!-- <div class="page-break"></div> -->
    <div class="investigation_section">
        <div class="investigation_section_heading">
            <h3>{{translatedLabels.Investigation}}:</h3>
        </div>
        <div class="investigation_section_content">
            <table
                    class="investigation_table"
                    style="width: 100%; text-align: center"
            >
                <thead>
                <tr>
                    <th style="width: 3%">
                        <h3>S. No</h3>
                    </th>
                    <th style="width: 20%">
                        <h3>{{translatedLabels.Description}}</h3>
                    </th>
                    <th style="width: 10%">
                        <h3>{{translatedLabels.Date}}</h3>
                    </th>
                    <th style="width: 20%">
                        <h3>{{translatedLabels.Purpose}}</h3>
                    </th>
                </tr>
                </thead>
                <tbody>
                {{#each investigations}}
                <tr>
                    <td>
                        <p>{{print @index }}</p>
                    </td>
                    <td style="text-align: left">
                        <p>
                            {{ type_description }} <br/>
                            <span style="font-size: 8px">{{translatedLabels.by}} {{translatedLabels.Dr_}} {{ organizer.name }}</span>
                            <br/>
                            {{translatedLabels.Note}}:-
                            <span style="font-family: var(--font-family-base);">{{ description }}</span
                            >
                        </p>
                    </td>
                    <td>
                        <p>{{ start_date }}</p>
                    </td>
                    <td>
                        <p>{{ reason }}</p>
                    </td>
                </tr>
                {{/each}}
                </tbody>
            </table>
        </div>
    </div>
    <!-- NEXT CONSULTATION SECTION -->
    <div class="next_consultation_section_heading">
        <h3>{{translatedLabels.Next_Consultation}}:</h3>
    </div>
    <div class="next_consultation_section">
        <div class="next_consultation_section_one">
            <table
                    class="consultation_table"
                    style="width: 100%; text-align: center"
            >
                <thead>
                <tr>
                    <th style="width: 3%">
                        <h3>S. No</h3>
                    </th>
                    <th style="width: 20%">
                        <h3>{{translatedLabels.Description}}</h3>
                    </th>
                    <th style="width: 10%">
                        <h3>{{translatedLabels.Date}}</h3>
                    </th>
                    <th style="width: 20%">
                        <h3>{{translatedLabels.Purpose}}</h3>
                    </th>
                </tr>
                </thead>
                <tbody>
                {{#each nextConsultation}}
                <tr>
                    <td>
                        <p>{{print @index}}</p>
                    </td>
                    <td style="text-align: left">
                        <p>
                            {{ type_description }} <br/>
                            <span style="font-size: 8px">{{translatedLabels.by}} {{translatedLabels.Dr_}} {{ organizer.name }}</span>
                            <br/>
                            {{translatedLabels.Note}}:-
                            <span style="font-family: var(--font-family-base);">{{ description }}</span
                            >
                        </p>
                    </td>
                    <td>
                        <p>{{ start_date }}</p>
                    </td>
                    <td>
                        <p>{{ reason }}</p>
                    </td>
                </tr>
                {{/each}}
                </tbody>
            </table>
        </div>
    </div>

    <div class="signature_section">
        <div class="signature_image_section">
            <picture>
                <!-- Primary source - doctor's actual signature -->
                <source srcset="{{ doctorSignImage }}" type="image/jpeg">
                <!-- Fallback SVG signature -->
                <img
                        class="signature_image"
                        height="40"
                        width="120"
                        src="../../../other/signature-default.svg"
                        alt="AdhereLive - Doctor's Signature"
                />
            </picture>
            <h3 class="signature-date">
                {{ creationDate }}
            </h3>
            <div class="signature-stamp">
                <h3>{{translatedLabels.Signature}}{{translatedLabels.Stamp}}</h3>
            </div>
            <div class="signature-details">
                <p>{{translatedLabels.RegNo}} {{ registrationNumber }}, {{ city }}</p>
            </div>
        </div>
    </div>

    <div>
        <h3>
            Note:
            <p style="font-family: PlusJakartaSans-Regular,sans-serif">
                This prescription is generated on the AdhereLive platform. To access
                your digital prescription download the mobile app using the QR code at
                the top. Please write to "customersupport@adhere.live" for any
                technical assistance.
            </p>
            <br/>
            <p style="font-weight: 100; font-family: var(--font-family-base);">
                यह प्रिस्क्रिप्शन AdhereLive प्लेटफॉर्म पर तैयार किया गया है। अपने
                डिजिटल प्रिस्क्रिप्शन देखने के लिए ऊपर दिए गए QR कोड का उपयोग करके
                मोबाइल ऐप डाउनलोड करें। कृपया किसी तकनीकी सहायता के लिए
                "customersupport@adhere.live" पर लिखें।
            </p>
        </h3>
    </div>

    {{#if (or diet_output.length pre_workouts.length) }}
    <div style="margin-top: 30px">
        <h3>{{translatedLabels.Lifestyle}} {{translatedLabels.Advice}}</h3>
    </div>

    <!-- DIET SECTION  -->
    {{#if diet_output.length}}
    <div class="diet_section_heading">
        <h3>{{translatedLabels.Diet}}:</h3>
    </div>
    <div class="diet_section_section">
        <div class="diet_section_section_one">
            <table class="diet_table" style="width: 100%; text-align: center">
                <thead>
                <tr>
                    <th style="width: 6%">
                        <h3>S. No</h3>
                    </th>
                    <th>
                        <h3>{{translatedLabels.Diet_Name}}</h3>
                    </th>
                    <th style="width: 40%">
                        <h3>{{translatedLabels.TimeDetails}}</h3>
                    </th>
                    <th style="width: 30%">
                        <h3>{{translatedLabels.Duration}}</h3>
                    </th>
                </tr>
                </thead>
                <tbody>
                {{#each diet_output }}
                <tr>
                    <td>
                        <p>{{print @index}}</p>
                    </td>
                    <td style="text-align: left">
                        <p>{{ this.name }}</p>
                    </td>
                    <td style="text-align: left">
                        {{#each this.food_group }}
                        <div
                                style="
	                  display: flex;
	                  justify-content: space-between;
	                  margin-bottom: 30px;
	                "
                        >
                            <div style="width: 100px">
                                <p>{{this.time.text}}</p>
                            </div>
                            <div style="display: flex; flex-flow: column">
                                {{#each this.food_group_details_array}}
                                <div style="width: 120px">
                                    <p>{{ this.details.name }}</p>
                                    <p>
                                        {{translatedLabels.Instructions}}:
                                        <span style="font-family: var(--font-family-base);">{{ this.notes }}</span>
                                    </p>
                                </div>
                                {{/each}}
                            </div>
                        </div>
                        {{/each}}
                        <div style="margin-top: 20px">
                            <h5>
                                {{translatedLabels.Repeat_Days}} - 
								{{#each this.repeat_days}}<span>{{this}},</span>{{/each}}
                            </h5>
                            <h5>
                                {{translatedLabels.What_Not_to_Do}} -
                                <span style="font-family: var(--font-family-base);">{{this.not_to_do}}</span>
                            </h5>
                            <h5>{{translatedLabels.Total_Calories}} - <span>{{ this.total_calories }}</span></h5>
                        </div>
                    </td>
                    <td>
                        <p>{{ this.durationText }}</p>
                    </td>
                </tr>
                {{/each }}
                </tbody>
            </table>
        </div>
    </div>
    {{/if}}

    {{#if pre_workouts.length}}
    <div class="workout_section_heading">
        <h3>{{translatedLabels.Workout}}:</h3>
    </div>
    <div class="workout_section_section">
        <div class="workout_section_section_one">
            <table class="workout_table" style="width: 100%; text-align: center">
                <thead>
                <tr>
                    <th style="width: 6%">
                        <h3>S. No</h3>
                    </th>
                    <th>
                        <h3>{{translatedLabels.Workout_Name}}</h3>
                    </th>
                    <th style="width: 30%">
                        <h3>{{translatedLabels.Time}}</h3>
                    </th>
                    <th style="width: 30%">
                        <h3>{{translatedLabels.Details}}</h3>
                    </th>
                    <th style="width: 20%">
                        <h3>{{translatedLabels.Duration}}</h3>
                    </th>
                </tr>
                </thead>
                <tbody>
                {{#each pre_workouts }}
                <tr>
                    <td>
                        <p>{{print @index }}</p>
                    </td>
                    <td style="text-align: left">
                        <p>{{ name }}</p>
                    </td>
                    <td>
                        <p>{{ formattedTime }}</p>
                    </td>
                    <td style="text-align: left">
                        {{#each ex}}
                        <p>
                            {{ ex_group.set }} {{translatedLabels.repetitions}} x {{ repetition_value }}
                            {{ repetitions.type }} {{ exercises.basic_info.name }}
                        </p>
                        {{/each}}
                        <h5>
                            {{translatedLabels.Repeat_Days}} - {{#each repeat_days}}<span>{{ this }}, </span>{{/each }}
                        </h5>
                        <h5>{{translatedLabels.What_Not_to_Do}} - <span>{{ not_to_do }}</span></h5>
                        <h5>
                            {{translatedLabels.['Total_Calories']}} -
                            <span>
                                {{total_cal}}
                                {{#if translatedLabels.Cal}}
                                    {{translatedLabels.Cal}}
                                {{else}}
                                    Cal  <!-- Fallback text -->
                                {{/if}}
                            </span>
                        </h5>
                    </td>
                    <td>
                        <p>{{ durationText }}</p>
                    </td>
                </tr>
                {{/each }}
                </tbody>
            </table>
        </div>
    </div>
    {{/if}}
    {{/if}}
</div>

<!-- Footer Template -->
<div class="footer" id="pdf-footer">
    <div class="footer-content">
        <p class="page-info">{{translatedLabels.Page}} <span id="page-num"></span> <span id="page-count"></span></p>
        <p class="generation-info">{{translatedLabels.Generated_via_AdhereLive_platform}}<br/>{{ generationTimestamp }}
        </p>
    </div>
</div>
</body>
</html>