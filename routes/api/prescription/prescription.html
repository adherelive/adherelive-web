<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Patient Prescription</title>
    <style>
        /* Base Page Setup */
        @media print {

            /* Force background colors and images to print */
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }

            /* Ensure page breaks don't occur within header elements */
            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                page-break-after: avoid;
            }

            @page {
                size: letter portrait;
            }

            img {
                /* Ensure images are rendered at their original quality */
                print-color-adjust: exact;
                max-width: 100%;
                height: auto;
                -webkit-backface-visibility: hidden;
                -webkit-print-color-adjust: exact;
                backface-visibility: hidden;
                page-break-inside: avoid;
            }

            /* TODO: Preserve dimensions for specific images, future use
            .top_provider_section img,
            .top_provider_section_three img,
            .tick_image img,
            .signature_image {
                max-width: none;
                width: attr(width);
                height: attr(height);
            }
             */

            /* This CSS rule ensures that table headers (contained within the <thead> element)
               repeat at the top of each new page when the table spans multiple pages. */
            /* Ensure table headers repeat */
            thead {
                display: table-header-group;
            }

            /* Avoid breaking within table rows */
            tr {
                page-break-inside: avoid;
            }
        }

        /* Page Setup and Print Styles */
        /* Add support for both A4 and Letter sizes */
        @page {
            size: A4 portrait;
            margin: 10mm 5mm;

            /* Use CSS variable. Reduced margins for better space utilization */
            /* bleed: 0; */
            @top-center {
                content: element(header);
            }

            @bottom-center {
                content: element(footer);
            }
        }

        /* Font Faces (Optimize loading - preload critical fonts) */
        /* Font Faces */
        @font-face {
            font-family: "PlusJakartaSans-Bold";
            src: url("https://res.cloudinary.com/myrltech/raw/upload/v1685442477/PlusJakartaSans-Bold.ttf");
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: "PlusJakartaSans-Regular";
            src: url("https://res.cloudinary.com/myrltech/raw/upload/v1685442477/PlusJakartaSans-Regular.ttf");
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: "PlusJakartaSans-Medium";
            src: url("https://res.cloudinary.com/myrltech/raw/upload/v1685509873/PlusJakartaSans-Medium.ttf");
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: "PlusJakartaSans-ExtraBold";
            src: url("https://res.cloudinary.com/myrltech/raw/upload/v1685509841/PlusJakartaSans-ExtraBold.ttf");
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: "PlusJakartaSans-Light";
            src: url("https://res.cloudinary.com/myrltech/raw/upload/v1685509841/PlusJakartaSans-Light.ttf");
            font-weight: normal;
            font-style: normal;
        }

        /* Global Styles */
        body {
            margin: 0;
            padding: 10px;
            /* Use CSS variable */
            font-size: 10px;
            font-family: "PlusJakartaSans-Regular", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
        }

        /* Maintains aspect ratio in the images */
        img {
            max-width: 100%;
            height: auto;
            object-fit: contain;
            /* Default object-fit */
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        /* Typography */
        h3,
        h4,
        h5 {
            font-family: "PlusJakartaSans-Bold";
            margin: 0;
            page-break-after: avoid;
        }

        h3 {
            font-size: 13px;
        }

        h4,
        h5 {
            font-size: 10px;
        }

        p {
            font-family: "PlusJakartaSans-Medium";
            font-size: 10px;
            margin: 0;
        }

        /* Container width constraints */
        .main-content {
            width: 100%;
            max-width: 210mm;
            /* A4 width */
            margin: 0 auto;
        }


        /* Specific rules for content breaking to existing styles */
        .avoid-break {
            break-inside: avoid-page;
            page-break-inside: avoid;
        }

        .force-break {
            break-before: page;
            page-break-before: always;
        }

        .keep-together {
            break-inside: avoid;
            page-break-inside: avoid;
        }

        /* For images that need to maintain specific dimensions */
        .fixed-dimension-img {
            width: auto;
            height: auto;
            max-width: 100%;
            object-fit: contain;
        }

        /* Logo images */
        .top_provider_section img {
            width: 60px;
            height: 60px;
            object-fit: contain;
        }

        /* QR code image */
        .top_provider_section_three img {
            width: 100px;
            height: 100px;
            object-fit: contain;
        }

        /* Tick images in medicine table */
        .tick_image img {
            width: 15px;
            height: 15px;
            object-fit: contain;
        }

        .tick_image {
            display: flex;
        }

        /* Signature image */
        .signature_image {
            width: 120px;
            height: 40px;
            object-fit: contain;
        }


        /* Header and Footer */
        .header {
            position: running(header);
            /* or running(footer) */
            width: 100%;
            padding-bottom: 10px;
            /* border-bottom: 1px solid black; */
        }

        .footer {
            position: running(footer);
            text-align: center;
            bottom: 0;
            width: 100%;
            padding: 10px 0;
            background-color: #fff;
            font-family: "PlusJakartaSans-Regular";
        }


        table th,
        td {
            border: 1px solid #ddd;
            padding: 5px;
            border-top: 0;
            border-left: 0;
        }


        /* Footer Styles */
        .footer-content {
            margin: 0 20px;
            font-size: 10px;
            color: #666;
            text-align: center;
        }

        .page-info {
            margin-bottom: 4px;
        }

        .generation-info {
            font-size: 8px;
            color: #888;
        }

        /* Page Break Controls */
        .avoid-break,
        .treatment_advise_section,
        .complaints_section,
        .signature-section {
            page-break-inside: avoid;
        }

        .page-break {
            page-break-before: always;
        }

        /* Section Grouping and Page Breaks */
        .section-group {
            page-break-inside: avoid;
            break-inside: avoid-page;
            margin-bottom: 15px;
        }

        /* Common Table Styles */
        .medicine_table,
        .investigation_table,
        .consultation_table,
        .diet_table {
            width: 100%;
            table-layout: fixed;
            border-collapse: collapse;
            border-spacing: 0;
            empty-cells: show;
            page-break-inside: auto;
            /* border-left: 1px solid black; */
        }

        /* Table Headers */
        .medicine_table thead,
        .investigation_table thead,
        .consultation_table thead,
        .diet_table thead,
        .workout_table thead {
            display: table-header-group;
        }

        /* Table Body */
        .medicine_table tbody,
        .investigation_table tbody,
        .consultation_table tbody,
        .diet_table tbody,
        .workout_table tbody {
            page-break-inside: auto;
        }

        /* Table Rows */
        .medicine_table tr,
        .investigation_table tr,
        .consultation_table tr,
        .diet_table tr,
        .workout_table tr {
            page-break-inside: avoid;
            /* Keep rows together as much as possible */
            page-break-after: auto;
            /* Allow page breaks *after* rows */
        }

        /* Table Headers and Cells */
        .medicine_table th,
        .investigation_table th,
        .consultation_table th,
        .diet_table th {
            background-color: #fff;
            position: sticky;
            top: 0;
            z-index: 2;
            /* border-bottom: 2px solid #000; */
        }



        /* Medicine Table Specific */
        .medicine_table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
            /* Keep columns aligned */
        }

        .medicine_table td p {
            font-size: 10px;
            margin: 0;
            white-space: normal;
        }

        .medicine_table th,
        .medicine_table td {
            /* border: 1px solid black; */
            padding: 5px;
            text-align: left;
            /* Align text to the left within cells */
            vertical-align: top;
            /* Align content to the top of cells */
            page-break-inside: avoid;
            /* Prevent breaks inside cells */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
            /* Allow wrapping within cells */
            word-wrap: break-word;
            /* Allow words to break */
        }

        .medicine_table thead {
            display: table-header-group;
            /* Ensure header repeats on new pages */
        }

        .medicine_table tfoot {
            display: table-footer-group;
            /* For possible future use */
        }

        .medicine_table thead::after {
            content: '';
            display: block;
            height: 5mm;
            /* Space after header */
        }

        .medicine_table tfoot::before {
            content: '';
            display: block;
            height: 5mm;
            /* Space before footer */
        }

        .medicine_table tr {
            page-break-inside: avoid;
            /* Prevent breaks within rows */
        }

        .medicine_table tbody tr {
            page-break-before: auto;
            /* Allow page breaks before rows in the tbody */
        }

        .medicine_table th:nth-child(1),
        .medicine_table td:nth-child(1) {
            width: 5%;
            /* S.No */
        }

        .medicine_table th:nth-child(3),
        .medicine_table td:nth-child(4),
        .medicine_table th:nth-child(4),
        .medicine_table td:nth-child(5) {
            width: 4%;
            /* Dose and Qty */
        }

        /* Medicine Schedule Columns - Make them equal and flexible */
        .medicine_table th:nth-child(5),
        /* Morning */
        .medicine_table td:nth-child(6),
        .medicine_table td:nth-child(7),
        .medicine_table td:nth-child(8) {
            width: 30%;
            /* Medicine Schedule */
        }

        .medicine_table th:nth-child(6),
        .medicine_table td:nth-child(9) {
            width: 12%;
            /* Start Date / Duration */
            white-space: normal;
        }

        /* Medicine Name Wrapper */
        /* .medicine_name_wrapper {
            display: grid;
            grid-template-columns: 30% 70%;
        } */

        .medicine_name_wrapper div {
            padding: 5px 5px;
            align-content: center;
        }

        /* Table Containers */
        .medicine_table_container {
            overflow: visible;
            margin: 15px 0;
        }

        /* Top Section Styles */
        .top_provider_section {
            display: flex;
            justify-content: space-around;
            margin-bottom: 5px;
            align-items: center;
        }

        .top_provider_section_two {
            padding-left: 20px;
            padding-right: 10px;
        }

        /* Section Wrappers */
        .top_section_wrapper {
            border: 1px solid #ddd;
            display: grid;
            grid-template-columns: repeat(2, 3fr);
            grid-auto-rows: minmax(30px, auto);
        }

        .top_section_wrapper_one,
        .top_section_wrapper_two {
            padding: 0 10px;
            display: flex;
            align-items: center;
        }

        .top_section_wrapper_one h3,
        .top_section_wrapper_two h3 {
            margin-right: 10px;
            font-family: "PlusJakartaSans-Bold";
            font-size: 13px;
        }

        .top_section_wrapper_one p,
        .top_section_wrapper_two p {
            font-family: "PlusJakartaSans-Medium";
            font-size: 10px;
            margin: 0;
        }

        /* Complaint Table Specific */
        .complaint_table {
            width: 100%;
            table-layout: fixed;
            /* Important: Use fixed layout to keep columns aligned */
            border-collapse: collapse;
            /* Collapse borders for a cleaner look */
        }

        .complaint_table th,
        .complaint_table td {
            padding: 5px;
            text-align: center;
            /* Center the content */
            /* border: 1px solid black; */
            /* Add borders back if needed */
        }

        /* Hide BMI, BP, RBS, Temperature */
        .complaint_table tr:nth-child(2) {
            /* Select the second row in each table */
            display: none;
        }

        .complaints_subsection>div:nth-child(1) .complaint_table tr:nth-child(2),
        /* BMI in the first table */
        .complaints_subsection>div:nth-child(2) .complaint_table tr:nth-child(2),
        /* BP in the second table */
        .complaints_subsection>div:nth-child(3) .complaint_table tr:nth-child(2) {
            /* Temperature in the third table */
            display: none;
        }

        /* Complaint Section */
        .complaints_section {
            border: 1px solid #ddd;
            border-right: 0;
            border-top: 0;
            border-bottom: 0;
            display: flex;
        }

        .complaints_section_one {
            padding: 10px;
            width: 50%;
        }

        .complaints_section_two {
            width: 50%;
        }

        /* Modified style to allow Height & Weight
        .complaints_subsection {
                grid-auto-rows: minmax(30px, auto);
                grid-template-columns: repeat(3, 3fr);
                display: grid;
            }
        */

        /* Modified Styles */
        .complaints_subsection {
            display: table;
            /* Use table display for the container */
            width: 100%;
            table-layout: fixed;
            /* Crucial for consistent column widths */
        }

        .complaints_subsection>div {
            display: table-cell;
            /* Use table cell display for the inner divs */
            vertical-align: top;
            /* Align cells to the top */
            padding: 10px;
        }

        /* Medicine Schedule */
        .schedule_medicine_wrapper {
            /* border: 1px solid black; */
            border-left: 0;
            border-right: 0;
            border-bottom: 0;
            /* margin-top: 10px; */
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-auto-rows: minmax(20px, auto);
            /* padding: 10px; */
        }

        .right_tick_div {
            padding: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-flow: column;
        }

        /* Section Styles */
        .diagnosis_section,
        .chef-complaints-section,
        .treatment_advise_section,
        .investigation_section_heading,
        .next_consultation_section_heading {
            /* border: 1px solid black;
            border-top: 0;
            padding: 10px; */
            /* border-left: 1px solid black; */
            /* border-right: 1px solid black; */
            border-top: 0;
            padding: 10px;
        }

        .next_consultation_section_heading {
            border-left: 1px solid #ddd;
            border-right: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
        }

        .next_consultation_section {
            border-left: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
            border-right: 1px solid #ddd;
        }

        .diagnosis_section,
        .chef-complaints-section,
        .treatment_advise_section,
        .investigation_section_heading {
            border-left: 1px solid #ddd;
            border-right: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
            border-collapse: separate;
            border-spacing: 0;
        }

        .workout_section_heading {
            border-left: 1px solid #ddd;
            border-right: 1px solid #ddd;
            border-collapse: separate;
            border-spacing: 0;
            padding: 10px;
        }

        .diet_section_heading {
            margin-top: 30px;
            padding: 10px;
        }

        /* Signature Section */
        .signature_section {
            text-align: center;
            margin-left: 600px;
            margin-bottom: 20px;
            margin-top: 30px;
            display: flex;
            align-items: end;
            justify-content: end;
        }

        .signature_section .signature_image_section {
            align-items: center;
            display: flex;
            flex-flow: column;
            text-align: center;
        }

        .signature_image {
            max-width: 120px;
            height: auto;
            /* Preserve aspect ratio while respecting height/width constraints */
            object-fit: contain;
        }

        .signature-date {
            margin: 10px 0;
        }

        .signature-stamp h3 {
            margin: 10px 0;
        }

        .signature-details {
            margin-top: 10px;
        }

        .signature-details p {
            margin: 0;
        }

        /* New Page for Lifestyle Advice */
        .lifestyle-advice-page {
            page-break-before: always;
            /* Start on a new page */
        }
    </style>
</head>

<body>
    <!-- TOP HEADING SECTION -->
    <!-- Header Template -->
    <div class="header">
        <div class="top_provider_section">
            <div class="top_provider_section_one">
                <picture>
                    <!-- Primary source - hospital's actual logo -->
                    <source srcset="{{ providerLogo }}">
                    <!-- Fallback SVG logo -->
                    <img height="60" width="60" src="../../../other/medical-backup.svg"
                        alt="AdhereLive - Hospital Logo" />
                </picture>
            </div>
            <div class="top_provider_section_two">
                <h3>
                    {{ providerName }} <br />
                    {{ providerAddress }} +91-8411042323 <br />
                </h3>
                <p>Patient: {{ patient_data.name }} - ID: {{ patient_data.uid }}</p>
            </div>
            <div class="top_provider_section_three">
                <img src="https://res.cloudinary.com/myrltech/image/upload/v1685082132/qr-code.jpg" alt="adhere"
                    width="100" height="100" />
            </div>
        </div>
    </div>

    <!-- SECTION TWO -->
    <!-- Content sections with your existing HTML, but with page break controls -->
    <!-- Main content starts -->
    <div style="width:100%;display:flex; justify-content: center; align-items: center; margin-bottom: 5px;">
        <h3>OUT PATIENT CARD</h3>
    </div>
    <div class="main-content">
        <!-- PATIENT TOP BASIC INFO  -->
        <div class="top_section_wrapper">
          
            <div class="top_section_wrapper_one">
                <h3>Patient Name :</h3>
                <p>{{ patient_data.name }}</p>
            </div>
            <div class="top_section_wrapper_two">
                <h3>Doctor Name:</h3>
                <p>Dr. {{ doctorName }} {{ degree }}</p>
            </div>
            
            <div class="top_section_wrapper_one">
                <h3>Patient Age/Gender :</h3>
                <p>{{ patient_data.age }}/{{ patient_data.gender }}</p>
            </div>
            <div class="top_section_wrapper_two">
                <h3>Departmont Name :</h3>
                <p></p>
            </div>

            <div class="top_section_wrapper_two">
                <h3>Next to Kin :</h3>
                <p></p>
            </div>
            <div class="top_section_wrapper_two">
                <h3>Unit :</h3>
                <p></p>
            </div>

            <div class="top_section_wrapper_two">
                <h3>Visit Id :</h3>
                <p></p>
            </div>
            <div class="top_section_wrapper_two">
                <h3>Registration date/time :</h3>
                <p>{{ patient_data.created_at }}</p>
            </div>
         
            <div class="top_section_wrapper_one">
                <h3>Patient Mobile No. :</h3>
                <p>+{{ patient_data.prefix }}-{{ patient_data.mobile_number }}</p>
            </div>
            <div class="top_section_wrapper_two">
                <h3>MR No :</h3>
                <p></p>
            </div>
          
            <div class="top_section_wrapper_one">
                <h3>Patient Address:</h3>
                <p>{{ patient_data.address }}</p>
            </div>
            <div class="top_section_wrapper_one">
            </div>
           
            <div class="top_section_wrapper_two">
                <h3>Sponsor :</h3>
                <p></p>
            </div>
            <div class="top_section_wrapper_one">
            </div>
           
            <div class="top_section_wrapper_two">
                <h3>Patient ID :</h3>
                <p>{{ patient_data.uid }}</p>
            </div>
            <div class="top_section_wrapper_one">
            </div>
        </div>

        <!-- Chief Complaints:  -->
        <div style="display: flex; width: 100%; border-right: 1px solid #ddd; border-left: 1px solid #ddd;">
            <!-- Left Section -->
            <div style="width: 65%; padding: 5px; text-align: center; border-right: 1px solid #ddd;">
                <div style="display: flex; align-items: center">
                    <h3>Allergies:</h3>
                    <p>{{ patient_data.allergies }}</p>
                    <br />
                </div>
                <div style="display: flex; align-items: center">
                    <h3>Comorbidities :</h3>
                    <p>{{ patient_data.comorbidities }}</p>
                    <br />
                </div>
            </div>

            <!-- Right Section -->
            <div style="width: 35%; padding: 5px;">
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 2px;">
                    <!-- 12 Boxes with Label and Value -->
                    <div
                        style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px; font-weight: bold;">
                        HEIGHT</div>
                    <div style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px;">
                        {{patient_data.height}} cm</div>

                    <div
                        style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px; font-weight: bold;">
                        WEIGHT</div>
                    <div style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px;">
                        {{patient_data.weight}} kg</div>

                    <div
                        style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px; font-weight: bold;">
                        PULSE</div>
                    <div style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px;">
                    </div>

                    <div
                        style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px; font-weight: bold;">
                        TEMP</div>
                    <div style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px;">
                    </div>

                    <div
                        style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px; font-weight: bold;">
                        BMI</div>
                    <div style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px;">
                    </div>

                    <div
                        style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px; font-weight: bold;">
                        BP</div>
                    <div style="border: 1px solid #ddd; height: 25px; text-align: center; line-height: 25px;">
                    </div>
                </div>
            </div>
        </div>


        <!-- DIAGNOSIS  AND SYMPTOMS-->
        <div class="top_section_wrapper">
            <div class="top_section_wrapper_one" style="border-right: 1px solid #ddd; padding: 10px">
                <!-- <h3>Diagnosis :</h3>
                <p>{{ diagnosis }}</p> -->
                <h3>Symptoms :</h3>
                <p style="width: 250px">{{ symptoms_final_value }}</p>
            </div>
            <div class="top_section_wrapper_two" style="padding: 10px">
                <!-- <h3>Symptoms :</h3> -->
                <!-- <p style="width: 250px">{{ symptoms_final_value }}</p> -->
                <h3>General | Systematic Examination :</h3>
                <p style="font-family: TiroDevanagariHindi-Regular">
                    {{ clinicalNotes }}
                </p>
            </div>
        </div>

        <!-- General | Systemic Examination: -->
        <div class="diagnosis_section">
            <div style="display: flex; align-items: center">
                <h3>Diagnosis :</h3>
                <p>{{ diagnosis }}</p>
                <!-- <h3>General | Systematic Examination :</h3>
                <p style="font-family: TiroDevanagariHindi-Regular">
                    {{ clinicalNotes }}
                </p> -->
            </div>
        </div>

        <!-- INVESTIGATION SECTION -->
        <!-- style="page-break-before: always" -->
        <!-- <div class="page-break"></div> -->
        <div class="investigation_section">
            <div class="investigation_section_heading">
                <h3>Investigation :</h3>
            </div>
            <div class="investigation_section_content">
                <table class="investigation_table"
                    style="width: 100%; text-align: center; border-collapse: collapse; border: 1px solid #ddd;">
                    <thead>
                        <tr style="border-bottom: 1px solid #ddd;">
                            <th style="width: 6%; padding: 8px;">
                                <h3>S. No</h3>
                            </th>
                            <th style="width: 20%; padding: 8px;">
                                <h3>Description</h3>
                            </th>
                            <th style="width: 10%; padding: 8px;">
                                <h3>Date</h3>
                            </th>
                            <th style="width: 20%; padding: 8px;">
                                <h3>Purpose</h3>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each investigations}}
                        <tr>
                            <td style="padding: 8px; border: none;">
                                <p>{{print @index}}</p>
                            </td>
                            <td style="text-align: left; padding: 8px; border: none;">
                                <p>
                                    {{ type_description }} <br />
                                    <!-- <span style="font-size: 8px;">by Dr. {{ organizer.name }}</span>
                                    <br /> -->
                                    Note:- <span>{{ description }}</span>
                                </p>
                            </td>
                            <td style="padding: 8px; border: none;">
                                <p>{{ start_date }}</p>
                            </td>
                            <td style="padding: 8px; border: none;">
                                <p>{{ reason }}</p>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TREATMENT ADVISE -->
        <div class="treatment_advise_section">
            <h3>Treatment And Follow-up Advice:</h3>
            <p style="font-family: TiroDevanagariHindi-Regular">
                <strong>{{ follow_up_advise }}</strong>
            </p>
        </div>



        <!-- COMPLAINTS SECTION -->
        <!-- <div class="top_section_wrapper">
            <div class="top_section_wrapper_one" style="border-right: 1px solid; padding: 10px">
                <h3>Height :</h3>
                <p>{{patient_data.height}} cm</p>
            </div>
            <div class="top_section_wrapper_two" style="padding: 10px">
                <h3>Weight :</h3>
                <p>{{patient_data.weight}} kg</p>
            </div>
        </div> -->

        <!-- MEDICINE  SECTION -->
        <div class="medicine_section avoid-break">
            <table class="medicine_table" style="width: 100%; text-align: center;">
                <thead>
                    <tr>
                        <th style="width: 5%">
                            <h3>S.No</h3>
                        </th>
                        <th style="width: 30%" colspan="2">
                            <h3>Name of Medicine</h3>
                        </th>
                        <th style="width: 30%" colspan="3">
                            <div class="schedule_medicine_wrapper"
                                style="display: flex; justify-content: space-around;">
                                <div>
                                    <h4>Morning</h4>
                                </div>
                                <div>
                                    <h4>Afternoon</h4>
                                </div>
                                <div>
                                    <h4>Night</h4>
                                </div>
                            </div>
                        </th>
                        <th style="width: 10%">
                            <h3>Duration</h3>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    {{#each medicationsList}}
                    <tr>
                        <td>
                            <p>{{print @index }}</p>
                        </td>
                        <td colspan="2" style="padding: 0px">
                            <div class="medicine_name_wrapper">
                                <div style="text-align: justify; align-items: center;">
                                    <p>
                                        <strong>{{ medicineType }} - {{ medicineName }} &nbsp; {{ unit }} qty: {{
                                            quantity }}</strong><br />
                                        {{ genericName }} {{ strength }}<br />
                                        <!-- <span style="font-size: 10px;">by Dr. {{ organizer.name }}</span><br/> -->
                                        Note: - <span>{{ description }}</span>
                                    </p>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="right_tick_div">
                                <div class="tick_image">
                                    {{#each timings_new.morning}}
                                    <img src="https://res.cloudinary.com/myrltech/image/upload/v1685103497/download.png"
                                        alt="tick" width="15px" height="15px" />
                                    {{/each}}
                                </div>
                                {{#each timings_new.morning}}
                                <p style="font-size: 8px">{{ this }}</p>
                                {{/each}}
                            </div>
                        </td>
                        <td>
                            <div class="right_tick_div">
                                <div class="tick_image">
                                    {{#each timings_new.afternoon}}
                                    <img src="https://res.cloudinary.com/myrltech/image/upload/v1685103497/download.png"
                                        alt="tick" width="15px" height="15px" />
                                    {{/each}}
                                </div>
                                {{#each timings_new.afternoon}}
                                <p style="font-size: 8px">{{ this }}</p>
                                {{/each}}
                            </div>
                        </td>
                        <td>
                            <div class="right_tick_div">
                                <div class="tick_image">
                                    {{#each timings_new.night}}
                                    <img src="https://res.cloudinary.com/myrltech/image/upload/v1685103497/download.png"
                                        alt="tick" width="15px" height="15px" />
                                    {{/each}}
                                </div>
                                {{#each timings_new.night}}
                                <p style="font-size: 8px">{{ this }}</p>
                                {{/each}}
                            </div>
                        </td>
                        <td>
                            {{#if isSOS}}
                            <p>Take whenever required</p>
                            {{else}}
                            <p>From {{ startDate }} for {{ duration }} day(s)</p>
                            {{/if}}
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>




        <!-- NEXT CONSULTATION SECTION -->
        <div class="next_consultation_section_heading">
            <h3>Next Consultation :</h3>
        </div>
        <div class="next_consultation_section">
            <div class="next_consultation_section_one">
                <table class="consultation_table" style="width: 100%; text-align: center">
                    <thead>
                        <tr>
                            <th style="width: 6%">
                                <h3>S. No</h3>
                            </th>
                            <th style="width: 20%">
                                <h3>Description</h3>
                            </th>
                            <th style="width: 10%">
                                <h3>Date</h3>
                            </th>
                            <th style="width: 20%">
                                <h3>Purpose</h3>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each nextConsultation}}
                        <tr>
                            <td style="border: none;">
                                <p>{{print @index}}</p>
                            </td>
                            <td style="text-align: left; border: none">
                                <p>
                                    {{ type_description }} <br />
                                    <!-- <span style="font-size: 8px">by Dr. {{ organizer.name }}</span>
                                    <br /> -->
                                    Note:-
                                    <span>{{ description }}</span>
                                </p>
                            </td>
                            <td style="border: none;">
                                <p>{{ start_date }}</p>
                            </td>
                            <td style="border: none;">
                                <p>{{ reason }}</p>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- SIGNITURE SECTION  -->
        <div class="signature_section">
            <div class="signature_image_section">
                <picture>
                    <!-- Primary source - doctor's actual signature -->
                    <source srcset="{{ doctorSignImage }}" type="image/jpeg">
                    <!-- Fallback SVG signature -->
                    <img class="signature_image" height="40" width="120" src="../../../other/signature-default.svg"
                        alt="AdhereLive - Doctor's Signature" />
                </picture>
                <h3 class="signature-date">
                    {{ creationDate }}
                </h3>
                <div class="signature-stamp">
                    <h3>SIGNATURE & STAMP</h3>
                </div>
                <div class="signature-details">
                    <p>Reg. No. {{ registrationNumber }}, {{ city }}</p>
                </div>
            </div>
        </div>

        <!-- NOTE SECTION  -->
        <div>
            <h3>
                Note:
                <p style="font-family: PlusJakartaSans-Regular">
                    This prescription is generated on the AdhereLive platform. To access
                    your digital prescription download the mobile app using the QR code at
                    the top. Please write to "customersupport@adhere.live" for any
                    technical assistance.
                </p>
                <p style="font-weight: 100; font-family: TiroDevanagariHindi-Regular">
                    यह प्रिस्क्रिप्शन AdhereLive प्लेटफॉर्म पर तैयार किया गया है। अपने
                    डिजिटल प्रिस्क्रिप्शन देखने के लिए ऊपर दिए गए QR कोड का उपयोग करके
                    मोबाइल ऐप डाउनलोड करें। कृपया किसी तकनीकी सहायता के लिए
                    "customersupport@adhere.live" पर लिखें।
                </p>
            </h3>
        </div>

        {{#if (or diet_output.length pre_workouts.length) }}
        <div style="margin-top: 30px">
            <h3>Lifestyle Advice</h3>
        </div>

        <!-- DIET SECTION  -->
        {{#if diet_output.length}}
        <div style="border-collapse: separate; border-spacing: 0; border: 1px solid #ddd;" class="diet_section_heading">
            <h3>Diet :</h3>
        </div>
        <div>
            <div>
                <table
                    style="width: 100%; text-align: center; border-collapse: separate; border-spacing: 0; border: 1px solid #ddd;">
                    <thead>
                        <tr>
                            <th style="width: 6%; border: 1px solid #ddd; padding: 8px;">
                                <h3>S. No</h3>
                            </th>
                            <th style="border: 1px solid #ddd; padding: 8px;">
                                <h3>Diet Name</h3>
                            </th>
                            <th style="width: 40%; border: 1px solid #ddd; padding: 8px;">
                                <h3>Time and details</h3>
                            </th>
                            <th style="width: 30%; border: 1px solid #ddd; padding: 8px;">
                                <h3>Duration</h3>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each diet_output }}
                        <tr style="border-bottom: 1px solid #ddd;">
                            <td style="border: none; padding: 8px;">
                                <p>{{print @index}}</p>
                            </td>
                            <td style="text-align: left; border: none; padding: 8px;">
                                <p>{{ this.name }}</p>
                            </td>
                            <td style="text-align: left; border: none; padding: 8px;">
                                {{#each this.food_group }}
                                <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
                                    <div style="width: 100px;">
                                        <p>{{this.time.text}}</p>
                                    </div>
                                    <div style="display: flex; flex-flow: column;">
                                        {{#each this.food_group_details_array}}
                                        <div style="width: 120px;">
                                            <p>{{ this.details.name }}</p>
                                            <p>Instructions: <span>{{ this.notes }}</span></p>
                                        </div>
                                        {{/each}}
                                    </div>
                                </div>
                                {{/each}}
                                <div style="margin-top: 20px;">
                                    <h5>Repeat Days - {{#each this.repeat_days}}<span>{{this}},</span>{{/each}}</h5>
                                    <h5>What Not to Do - <span>{{this.not_to_do}}</span></h5>
                                    <h5>Total Calories - <span>{{ this.total_calories }}</span></h5>
                                </div>
                            </td>
                            <td style="border: none; padding: 8px;">
                                <p>{{ this.durationText }}</p>
                            </td>
                        </tr>
                        {{/each }}
                    </tbody>
                </table>
            </div>
        </div>
        {{/if}}




        <!-- WORKOUT SECTION  -->
        {{#if pre_workouts.length}}
        <div class="workout_section_heading">
            <h3>Workout :</h3>
        </div>
        <div>
            <div>
                <table
                    style="width: 100%; text-align: center; border-collapse: separate; border-spacing: 0; border: 1px solid #ddd;">
                    <thead>
                        <tr>
                            <th style="width: 6%; border: 1px solid #ddd; padding: 8px;">
                                <h3>S. No</h3>
                            </th>
                            <th style="width: 30%; border: 1px solid #ddd; padding: 8px;">
                                <h3>Workout Name</h3>
                            </th>
                            <th style="width: 15%; border: 1px solid #ddd; padding: 8px;">
                                <h3>Time</h3>
                            </th>
                            <th style="width: 30%; border: 1px solid #ddd; padding: 8px;">
                                <h3>Details</h3>
                            </th>
                            <th style="width: 15%; border: 1px solid #ddd; padding: 8px;">
                                <h3>Duration</h3>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each pre_workouts }}
                        <tr style="border-bottom: 1px solid #ddd;">
                            <td style="border: none; padding: 8px;">
                                <p>{{print @index }}</p>
                            </td>
                            <td style="text-align: left; border: none; padding: 8px;">
                                <p>{{ name }}</p>
                            </td>
                            <td style="border: none; padding: 8px;">
                                <p>{{ formattedTime }}</p>
                            </td>
                            <td style="text-align: left; border: none; padding: 8px;">
                                {{#each ex}}
                                <p>
                                    {{ ex_group.set }} set x {{ repetition_value }}
                                    {{ repetitions.type }} {{ exercises.basic_info.name }}
                                </p>
                                {{/each}}
                                <h5>
                                    Repeat Days - {{#each repeat_days}}<span>{{ this }}, </span>{{/each }}
                                </h5>
                                <h5>What Not to Do - <span>{{ not_to_do }}</span></h5>
                                <h5>Total Calories - <span>{{ total_cal }} Cal</span></h5>
                            </td>
                            <td style="border: none; padding: 8px;">
                                <p>{{ durationText }}</p>
                            </td>
                        </tr>
                        {{/each }}
                    </tbody>
                </table>
            </div>
        </div>
        {{/if}}
        {{/if}}

    </div>

    <!-- Footer Template -->
    <div class="footer" id="pdf-footer">
        <div class="footer-content">
            <p class="page-info">Page <span id="page-num"></span> of <span id="page-count"></span></p>
            <p class="generation-info">Generated via AdhereLive platform<br />{{ generationTimestamp }}</p>
        </div>
    </div>
</body>

</html>